<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.youyd.recruit.dao.RecruitDao" >
    <resultMap id="BaseResultMap" type="com.youyd.recruit.pojo.Recruit" >
        <id column="id" property="id" jdbcType="VARCHAR" />
        <result column="job_name" property="jobName" jdbcType="VARCHAR" />
        <result column="salary" property="salary" jdbcType="VARCHAR" />
        <result column="condition" property="condition" jdbcType="VARCHAR" />
        <result column="education" property="education" jdbcType="VARCHAR" />
        <result column="type" property="type" jdbcType="VARCHAR" />
        <result column="address" property="address" jdbcType="VARCHAR" />
        <result column="enterprise_id" property="enterpriseId" jdbcType="VARCHAR" />
        <result column="create_time" property="createTime" jdbcType="VARCHAR" />
        <result column="state" property="state" jdbcType="VARCHAR" />
        <result column="url" property="url" jdbcType="VARCHAR" />
        <result column="label" property="label" jdbcType="VARCHAR" />
        <result column="job_description" property="jobDescription" jdbcType="VARCHAR" />
        <result column="job_require" property="jobRequire" jdbcType="VARCHAR" />
        <result column="update_time" property="updateTime" jdbcType="VARCHAR" />
    </resultMap>

    <sql id="Base_Column_List" >
      id, job_name, salary, 'condition', education, type, address, enterprise_id, create_time,
      state, url, label, job_description, job_require, update_time
  </sql>

    <select id="findRecruitByCondition" resultMap="BaseResultMap" parameterType="java.util.Map" >
        select
        <include refid="Base_Column_List" />
        from tb_recruit
        order by create_time DESC
    </select>

    <!--按照主键查找-->
    <select id="findRecruitByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String">
        select
        <include refid="Base_Column_List" />
        from tb_recruit
        <where>
            <if test="_parameter != null and _parameter != ''">
                id = #{_parameter}
            </if>
        </where>
        order by create_time DESC
    </select>

    <!--查询状态不为0的前12条记录 -->
    <select id="newJob" resultMap="BaseResultMap" parameterType="java.lang.String">
        select
        <include refid="Base_Column_List" />
        from tb_recruit
        <where>
            state != '0'
        </where>
        order by create_time DESC
        limit 0,12
    </select>


    <!--更新全部-->
    <insert id="insertRecruit" parameterType="com.youyd.recruit.pojo.Recruit" >
        insert into tb_recruit (
        id,
        job_name,
        salary,
        condition,
        education,
        type,
        address,
        enterprise_id,
        create_time,
        state,
        url,
        label,
        job_description,
        job_require,
        update_time
        )
        values (#{id,jdbcType=VARCHAR}, #{jobName,jdbcType=VARCHAR}, #{salary,jdbcType=VARCHAR},
          #{condition,jdbcType=VARCHAR}, #{education,jdbcType=VARCHAR}, #{type,jdbcType=VARCHAR},
          #{address,jdbcType=VARCHAR}, #{enterpriseId,jdbcType=VARCHAR}, #{createTime,jdbcType=TIMESTAMP},
          #{state,jdbcType=VARCHAR}, #{url,jdbcType=VARCHAR}, #{label,jdbcType=VARCHAR},
          #{jobDescription,jdbcType=VARCHAR}, #{jobRequire,jdbcType=VARCHAR}, #{updateTime,jdbcType=TIMESTAMP}
          )
  </insert>

    <!--有选择的更新-->
    <update id="updateByPrimaryKeySelective" parameterType="com.youyd.recruit.pojo.Recruit" >
        update tb_recruit
        <set >
            <if test="jobName != null" >
                job_name = #{jobName,jdbcType=VARCHAR},
            </if>
            <if test="salary != null" >
                salary = #{salary,jdbcType=VARCHAR},
            </if>
            <if test="condition != null" >
                condition = #{condition,jdbcType=VARCHAR},
            </if>
            <if test="education != null" >
                education = #{education,jdbcType=VARCHAR},
            </if>
            <if test="type != null" >
                type = #{type,jdbcType=VARCHAR},
            </if>
            <if test="address != null" >
                address = #{address,jdbcType=VARCHAR},
            </if>
            <if test="enterpriseId != null" >
                enterprise_id = #{enterpriseId,jdbcType=VARCHAR},
            </if>
            <if test="createTime != null" >
                create_time = #{createTime,jdbcType=VARCHAR},
            </if>
            <if test="state != null" >
                state = #{state,jdbcType=VARCHAR},
            </if>
            <if test="url != null" >
                url = #{url,jdbcType=VARCHAR},
            </if>
            <if test="label != null" >
                label = #{label,jdbcType=VARCHAR},
            </if>
            <if test="jobDescription != null" >
                job_description = #{jobDescription,jdbcType=VARCHAR},
            </if>
            <if test="jobRequire != null" >
                job_require = #{jobRequire,jdbcType=VARCHAR},
            </if>
            <if test="updateTime != null" >
                update_time = #{updateTime,jdbcType=VARCHAR},
            </if>
        </set>
        where id = #{id,jdbcType=VARCHAR}
    </update>

    <delete id="deleteByPrimaryKey" parameterType="java.util.List" >
        delete from tb_recruit
        <where>
            <foreach collection="list" item="id" separator="," open="id in (" close=")">
                #{id}
            </foreach>
        </where>
    </delete>


</mapper>